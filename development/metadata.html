


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Metadata &mdash; pdal.io</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/breathe.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="../about.html"/>
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="pdal.io" href="../index.html"/>
        <link rel="up" title="Development" href="index.html"/>
        <link rel="next" title="Project Goals" href="goals.html"/>
        <link rel="prev" title="Errors and Error Handling" href="errorhandling.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> PDAL
          

          
          </a>

          
            
            
              <div class="version">
                1.5.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apps/index.html">Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pipeline.html">Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stages/readers.html">Readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stages/writers.html">Writers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stages/filters.html">Filters</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dimensions.html">Dimensions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workshop/index.html">Workshop</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">PDAL Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation/index.html">Compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="conventions.html">Coding Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributors.html">Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html">Docs</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker.html">Building Docker Containers for PDAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="errorhandling.html">Errors and Error Handling</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Metadata</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#metadata-nodes">Metadata Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metadata-and-stages">Metadata and Stages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="goals.html">Project Goals</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="integration.html">Continuous Integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">PDAL</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Home</a> &raquo;</li>
      
        <li><a href="index.html">Development</a> &raquo;</li>
      
    <li>Metadata</li>
    <li class="wy-breadcrumbs-aside">
      
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="metadata">
<span id="id1"></span><h1>Metadata<a class="headerlink" href="#metadata" title="Permalink to this headline">¶</a></h1>
<p>In addition to point data, PDAL stores metadata during the processing of
a pipeline.  Metadata is stored internally as strings, though the API
accepts a variety of types that are automatically converted as necessary.
Each item of metadata consists of a name, a description (optional), a value
and a type.  In addition, each item of metadata can have a list of child
metadata values.</p>
<p>Metadata is made available to users of PDAL through a JSON tree.  Commands
such as <a class="reference internal" href="../apps/pipeline.html#pipeline-command"><span class="std std-ref">pdal pipeline</span></a> and
<a class="reference internal" href="../apps/translate.html#translate-command"><span class="std std-ref">pdal translate</span></a> provide options to allow
the JSON-formatted metadata created by PDAL to be written to a file.</p>
<div class="section" id="metadata-nodes">
<h2>Metadata Nodes<a class="headerlink" href="#metadata-nodes" title="Permalink to this headline">¶</a></h2>
<p>Each item of metadata is stored in an object known as a MetadataNode.
Metadata nodes are reference types that can be copied cheaply.  Metadata nodes
are annotated with the original data type to allow better interpretation of
the data.
For example, when binary data is stored in a base 64-encoded
format, knowing that the data doesn&#8217;t ulitmately represent a string can allow
algorithms to convert it back to its binary representation when desired.
Similarly, knowing that data is numeric allows it
to be written as a JSON numeric type rather than as a string.</p>
<p>The name of a metadata node is immutable.  If you wish to add a copy of
metadata (and subchildren) to some node using a different name, you need
to call the provided function &#8220;clone()&#8221;.</p>
<p>A metadata node is added as a child to another node using add().  Usually
the type of the data assigned to the metadata node is determined through
overloading, but there are instances where this is impossible and the
programmer must call a specific function to set the type of the metadata node.
Binary data that has been converted to a string by base 64 encoding can
be tagged as a such by calling addEncoded().  Programmers can specify the
type of a node explictly by calling addWithType().  Currently supported
types are: &#8220;boolean&#8221;, &#8220;string&#8221;, &#8220;float&#8221;, &#8220;double&#8221;, &#8220;bounds&#8221;,
&#8220;nonNegativeInteger&#8221;, &#8220;integer&#8221;, &#8220;uuid&#8221; and &#8220;base64Binary&#8221;.</p>
<p>Metadata nodes can be presented as lists when transformed to JSON.  If
multiple nodes with the same name are added to a parent node, those
subnodes will automatically be tagged as list nodes and will be enclosed in
square brackets.  Single nodes can be forced to be treated as JSON lists
by calling addList() instead of add() on a parent node.</p>
</div>
<div class="section" id="metadata-and-stages">
<h2>Metadata and Stages<a class="headerlink" href="#metadata-and-stages" title="Permalink to this headline">¶</a></h2>
<p>Stages in PDAL each have a base metadata node.  You can retrieve a stage&#8217;s
metadata node by calling getMetadata().  When a PDAL pipeline is run, its
metadata is organized as a list of stage nodes to which subnodes have been
added.  From within the implementation of a stage, metadata is typically
added similarly to the following:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="n">MetadataNode</span> <span class="n">root</span> <span class="o">=</span> <span class="n">getMetadata</span><span class="p">();</span>
<span class="n">root</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;nodename&quot;</span><span class="p">,</span> <span class="s">&quot;Some string data&quot;</span><span class="p">);</span>
<span class="n">root</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;intlist&quot;</span><span class="p">,</span> <span class="mi">45</span><span class="p">);</span>
<span class="n">root</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;intlist&quot;</span><span class="p">,</span> <span class="mi">55</span><span class="p">);</span>
<span class="n">Uuid</span> <span class="n">nullUuid</span><span class="p">;</span>
<span class="n">MetadataNode</span> <span class="nf">pnode</span><span class="p">(</span><span class="s">&quot;parent&quot;</span><span class="p">);</span>
<span class="n">root</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">pnode</span><span class="p">);</span>
<span class="n">pnode</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;nulluuidnode&quot;</span><span class="p">,</span> <span class="n">nullUuid</span><span class="p">);</span>
<span class="n">pnode</span><span class="p">.</span><span class="n">addList</span><span class="p">(</span><span class="s">&quot;num_in_list&quot;</span><span class="p">,</span> <span class="mi">66</span><span class="p">);</span>
</pre></div>
</div>
<p>If the above code was part of a stage &#8220;writers.test&#8221;, a transformation to JSON
would produce the following output:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;writers.test&quot;</span><span class="p">:</span>
  <span class="p">{</span>
    <span class="nt">&quot;intlist&quot;</span><span class="p">:</span>
    <span class="p">[</span>
      <span class="mi">45</span><span class="p">,</span>
      <span class="mi">55</span>
    <span class="p">],</span>
    <span class="nt">&quot;nodename&quot;</span><span class="p">:</span> <span class="s2">&quot;Some string data&quot;</span><span class="p">,</span>
    <span class="nt">&quot;parent&quot;</span><span class="p">:</span>
    <span class="p">{</span>
      <span class="nt">&quot;nulluuidnode&quot;</span><span class="p">:</span> <span class="s2">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="p">,</span>
      <span class="nt">&quot;num_in_list&quot;</span><span class="p">:</span>
      <span class="p">[</span>
        <span class="mi">66</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="goals.html" class="btn btn-neutral float-right" title="Project Goals" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="errorhandling.html" class="btn btn-neutral" title="Errors and Error Handling" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
                    &copy;  2017
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>.
      Last updated on May 31, 2017.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.5.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
    <div class="footer">
        <div class="container">
                    &copy;  2017
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>,
                Last updated
                    on May 31, 2017.
        </div>
    </div>

</body>
</html>