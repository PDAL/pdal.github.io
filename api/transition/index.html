


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>libLAS C API to PDAL transition guide &mdash; pdal.io</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/breathe.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="../../about.html"/>
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="pdal.io" href="../../index.html"/>
        <link rel="up" title="API" href="../index.html"/>
        <link rel="next" title="FAQ" href="../../faq.html"/>
        <link rel="prev" title="pdal::Writer" href="../cpp/writer.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> PDAL
          

          
          </a>

          
            
            
              <div class="version">
                1.9.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../download.html">Download</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../apps/index.html">Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../community.html">Community</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pipeline.html">Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stages/readers.html">Readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stages/writers.html">Writers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stages/filters.html">Filters</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dimensions.html">Dimensions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python.html">Python</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../workshop/index.html">Workshop</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../project/index.html">Project</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cpp/index.html">C++ API</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">libLAS C API to PDAL transition guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#includes">Includes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#initial-steps">Initial steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dataset-properties">Dataset properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#iterating-over-points">Iterating over points</a></li>
<li class="toctree-l3"><a class="reference internal" href="#point-validity">Point validity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#coordinates">Coordinates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#returns">Returns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#color">Color</a></li>
<li class="toctree-l3"><a class="reference internal" href="#time">Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-point-attributes">Other point attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#memory-management">Memory management</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">PDAL</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Home</a> &raquo;</li>
      
        <li><a href="../index.html">API</a> &raquo;</li>
      
    <li>libLAS C API to PDAL transition guide</li>
    <li class="wy-breadcrumbs-aside">
      
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="liblas-c-api-to-pdal-transition-guide">
<span id="liblas-to-pdal"></span><h1>libLAS C API to PDAL transition guide<a class="headerlink" href="#liblas-c-api-to-pdal-transition-guide" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Vaclav Petras</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body"><a class="reference external" href="mailto:wenzeslaus&#37;&#52;&#48;gmail&#46;com">wenzeslaus<span>&#64;</span>gmail<span>&#46;</span>com</a></td>
</tr>
<tr class="field-odd field"><th class="field-name">Date:</th><td class="field-body">09/04/2015</td>
</tr>
</tbody>
</table>
<p>This page shows how to port code using libLAS C API to PDAL API
(which is C++). The new code is not using full power of PDAL but
it uses just what is necessary to read content of a LAS file.</p>
<div class="section" id="includes">
<h2>Includes<a class="headerlink" href="#includes" title="Permalink to this headline">¶</a></h2>
<p>libLAS include:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;liblas/capi/liblas.h&gt;</span><span class="cp"></span>
</pre></div>
</div>
<p>For PDAL, in addition to PDAL headers, we also include standard headers
which will be useful later:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;pdal/PointTable.hpp&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;pdal/PointView.hpp&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;pdal/LasReader.hpp&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;pdal/LasHeader.hpp&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;pdal/Options.hpp&gt;</span><span class="cp"></span>
</pre></div>
</div>
</div>
<div class="section" id="initial-steps">
<h2>Initial steps<a class="headerlink" href="#initial-steps" title="Permalink to this headline">¶</a></h2>
<p>Opening the dataset in libLAS:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">LASReaderH</span> <span class="n">LAS_reader</span><span class="p">;</span>
<span class="n">LASHeaderH</span> <span class="n">LAS_header</span><span class="p">;</span>
<span class="n">LASSRSH</span> <span class="n">LAS_srs</span><span class="p">;</span>
<span class="n">LAS_reader</span> <span class="o">=</span> <span class="n">LASReader_Create</span><span class="p">(</span><span class="n">in_opt</span><span class="o">-&gt;</span><span class="n">answer</span><span class="p">);</span>
<span class="n">LAS_header</span> <span class="o">=</span> <span class="n">LASReader_GetHeader</span><span class="p">(</span><span class="n">LAS_reader</span><span class="p">);</span>
</pre></div>
</div>
<p>The higher level of abstraction in PDAL requires a little bit more code
for the initial steps:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">pdal</span><span class="o">::</span><span class="n">Option</span> <span class="n">las_opt</span><span class="p">(</span><span class="s">&quot;filename&quot;</span><span class="p">,</span> <span class="n">in_opt</span><span class="o">-&gt;</span><span class="n">answer</span><span class="p">);</span>
<span class="n">pdal</span><span class="o">::</span><span class="n">Options</span> <span class="n">las_opts</span><span class="p">;</span>
<span class="n">las_opts</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">las_opt</span><span class="p">);</span>
<span class="n">pdal</span><span class="o">::</span><span class="n">PointTable</span> <span class="n">table</span><span class="p">;</span>
<span class="n">pdal</span><span class="o">::</span><span class="n">LasReader</span> <span class="n">las_reader</span><span class="p">;</span>
<span class="n">las_reader</span><span class="p">.</span><span class="n">setOptions</span><span class="p">(</span><span class="n">las_opts</span><span class="p">);</span>
<span class="n">las_reader</span><span class="p">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">table</span><span class="p">);</span>
<span class="n">pdal</span><span class="o">::</span><span class="n">PointViewSet</span> <span class="n">point_view_set</span> <span class="o">=</span> <span class="n">las_reader</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="n">table</span><span class="p">);</span>
<span class="n">pdal</span><span class="o">::</span><span class="n">PointViewPtr</span> <span class="n">point_view</span> <span class="o">=</span> <span class="o">*</span><span class="n">point_view_set</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
<span class="n">pdal</span><span class="o">::</span><span class="n">Dimension</span><span class="o">::</span><span class="n">IdList</span> <span class="n">dims</span> <span class="o">=</span> <span class="n">point_view</span><span class="o">-&gt;</span><span class="n">dims</span><span class="p">();</span>
<span class="n">pdal</span><span class="o">::</span><span class="n">LasHeader</span> <span class="n">las_header</span> <span class="o">=</span> <span class="n">las_reader</span><span class="p">.</span><span class="n">header</span><span class="p">();</span>
</pre></div>
</div>
<p>The PDAL code is also different in the way that we read all the data
right away while in libLAS we just open the file.
To make use of other readers supported by PDAL, see <code class="docutils literal"><span class="pre">StageFactory</span></code> class.</p>
<p>The test if the file was loaded successfully, the test of the header
pointer was used with libLAS:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">LAS_header</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* fail */</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In general, PDAL will throw a <code class="docutils literal"><span class="pre">pdal_error</span></code> exception in case something
is wrong and it can’t recover such in the case when the file can’t be opened.
To handle the exceptional state by yourself, you can wrap the code
in <code class="docutils literal"><span class="pre">try-catch</span></code> block:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="k">try</span> <span class="p">{</span>
    <span class="cm">/* actual code */</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="cm">/* fail in your own way */</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dataset-properties">
<h2>Dataset properties<a class="headerlink" href="#dataset-properties" title="Permalink to this headline">¶</a></h2>
<p>We assume we defined all the following variables as <code class="docutils literal"><span class="pre">double</span></code>.</p>
<p>The general properties from the LAS file are retrieved from the
header in libLAS:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">scale_x</span> <span class="o">=</span> <span class="n">LASHeader_GetScaleX</span><span class="p">(</span><span class="n">LAS_header</span><span class="p">);</span>
<span class="n">scale_y</span> <span class="o">=</span> <span class="n">LASHeader_GetScaleY</span><span class="p">(</span><span class="n">LAS_header</span><span class="p">);</span>
<span class="n">scale_z</span> <span class="o">=</span> <span class="n">LASHeader_GetScaleZ</span><span class="p">(</span><span class="n">LAS_header</span><span class="p">);</span>

<span class="n">offset_x</span> <span class="o">=</span> <span class="n">LASHeader_GetOffsetX</span><span class="p">(</span><span class="n">LAS_header</span><span class="p">);</span>
<span class="n">offset_y</span> <span class="o">=</span> <span class="n">LASHeader_GetOffsetY</span><span class="p">(</span><span class="n">LAS_header</span><span class="p">);</span>
<span class="n">offset_z</span> <span class="o">=</span> <span class="n">LASHeader_GetOffsetZ</span><span class="p">(</span><span class="n">LAS_header</span><span class="p">);</span>

<span class="n">xmin</span> <span class="o">=</span> <span class="n">LASHeader_GetMinX</span><span class="p">(</span><span class="n">LAS_header</span><span class="p">);</span>
<span class="n">xmax</span> <span class="o">=</span> <span class="n">LASHeader_GetMaxX</span><span class="p">(</span><span class="n">LAS_header</span><span class="p">);</span>
<span class="n">ymin</span> <span class="o">=</span> <span class="n">LASHeader_GetMinY</span><span class="p">(</span><span class="n">LAS_header</span><span class="p">);</span>
<span class="n">ymax</span> <span class="o">=</span> <span class="n">LASHeader_GetMaxY</span><span class="p">(</span><span class="n">LAS_header</span><span class="p">);</span>
</pre></div>
</div>
<p>And the same applies PDAL:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">scale_x</span> <span class="o">=</span> <span class="n">las_header</span><span class="p">.</span><span class="n">scaleX</span><span class="p">();</span>
<span class="n">scale_y</span> <span class="o">=</span> <span class="n">las_header</span><span class="p">.</span><span class="n">scaleY</span><span class="p">();</span>
<span class="n">scale_z</span> <span class="o">=</span> <span class="n">las_header</span><span class="p">.</span><span class="n">scaleZ</span><span class="p">();</span>

<span class="n">offset_x</span> <span class="o">=</span> <span class="n">las_header</span><span class="p">.</span><span class="n">offsetX</span><span class="p">();</span>
<span class="n">offset_y</span> <span class="o">=</span> <span class="n">las_header</span><span class="p">.</span><span class="n">offsetY</span><span class="p">();</span>
<span class="n">offset_z</span> <span class="o">=</span> <span class="n">las_header</span><span class="p">.</span><span class="n">offsetZ</span><span class="p">();</span>

<span class="n">xmin</span> <span class="o">=</span> <span class="n">las_header</span><span class="p">.</span><span class="n">minX</span><span class="p">();</span>
<span class="n">xmax</span> <span class="o">=</span> <span class="n">las_header</span><span class="p">.</span><span class="n">maxX</span><span class="p">();</span>
<span class="n">ymin</span> <span class="o">=</span> <span class="n">las_header</span><span class="p">.</span><span class="n">minY</span><span class="p">();</span>
<span class="n">ymax</span> <span class="o">=</span> <span class="n">las_header</span><span class="p">.</span><span class="n">maxY</span><span class="p">();</span>
</pre></div>
</div>
<p>The point record count in libLAS:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">n_features</span> <span class="o">=</span> <span class="n">LASHeader_GetPointRecordsCount</span><span class="p">(</span><span class="n">LAS_header</span><span class="p">);</span>
</pre></div>
</div>
<p>is just point count in PDAL:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">n_features</span> <span class="o">=</span> <span class="n">las_header</span><span class="p">.</span><span class="n">pointCount</span><span class="p">();</span>
</pre></div>
</div>
<p>WKT of a spatial reference system is obtained from the header in libLAS:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">LAS_srs</span> <span class="o">=</span> <span class="n">LASHeader_GetSRS</span><span class="p">(</span><span class="n">LAS_header</span><span class="p">);</span>
<span class="kt">char</span><span class="o">*</span> <span class="n">projstr</span> <span class="o">=</span> <span class="n">LASSRS_GetWKT_CompoundOK</span><span class="p">(</span><span class="n">LAS_srs</span><span class="p">);</span>
</pre></div>
</div>
<p>In PDAL, spatial reference is part of the <code class="docutils literal"><span class="pre">PointTable</span></code>:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">char</span><span class="o">*</span> <span class="n">projstr</span> <span class="o">=</span> <span class="n">table</span><span class="p">.</span><span class="n">spatialRef</span><span class="p">().</span><span class="n">getWKT</span><span class="p">(</span><span class="n">pdal</span><span class="o">::</span><span class="n">SpatialReference</span><span class="o">::</span><span class="n">eCompoundOK</span><span class="p">).</span><span class="n">c_str</span><span class="p">();</span>
</pre></div>
</div>
<p>Whether the time or color is supported by the LAS format, one would
have to determine from the format ID in libLAS:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">las_point_format</span> <span class="o">=</span> <span class="n">LASHeader_GetDataFormatId</span><span class="p">(</span><span class="n">LAS_header</span><span class="p">);</span>
<span class="n">have_time</span> <span class="o">=</span> <span class="p">(</span><span class="n">las_point_format</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">...</span>
</pre></div>
</div>
<p>In PDAL, there is a convenient function for it in the header:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">have_time</span> <span class="o">=</span> <span class="n">las_header</span><span class="p">.</span><span class="n">hasTime</span><span class="p">();</span>
<span class="n">have_color</span> <span class="o">=</span> <span class="n">las_header</span><span class="p">.</span><span class="n">hasColor</span><span class="p">();</span>
</pre></div>
</div>
<p>The presence of color, time and other dimensions can be also determined
with:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">pdal</span><span class="o">::</span><span class="n">Dimension</span><span class="o">::</span><span class="n">IdList</span> <span class="n">dims</span> <span class="o">=</span> <span class="n">point_view</span><span class="o">-&gt;</span><span class="n">dims</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="iterating-over-points">
<h2>Iterating over points<a class="headerlink" href="#iterating-over-points" title="Permalink to this headline">¶</a></h2>
<p>libLAS:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="p">((</span><span class="n">LAS_point</span> <span class="o">=</span> <span class="n">LASReader_GetNextPoint</span><span class="p">(</span><span class="n">LAS_reader</span><span class="p">))</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>PDAL:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="n">pdal</span><span class="o">::</span><span class="n">PointId</span> <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">idx</span> <span class="o">&lt;</span> <span class="n">point_view</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">idx</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="point-validity">
<h2>Point validity<a class="headerlink" href="#point-validity" title="Permalink to this headline">¶</a></h2>
<p>The correct usage of libLAS required to test point validity:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">LASPoint_IsValid</span><span class="p">(</span><span class="n">LAS_point</span><span class="p">)</span>
</pre></div>
</div>
<p>In PDAL, there is no need to do that and the caller can assume that
all the points provided by PDAL are valid.</p>
</div>
<div class="section" id="coordinates">
<h2>Coordinates<a class="headerlink" href="#coordinates" title="Permalink to this headline">¶</a></h2>
<p>libLAS:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">LASPoint_GetX</span><span class="p">(</span><span class="n">LAS_point</span><span class="p">);</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">LASPoint_GetY</span><span class="p">(</span><span class="n">LAS_point</span><span class="p">);</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">LASPoint_GetZ</span><span class="p">(</span><span class="n">LAS_point</span><span class="p">);</span>
</pre></div>
</div>
<p>In PDAL, point coordinates are one of the dimensions:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">pdal</span><span class="o">::</span><span class="n">Dimension</span><span class="p">;</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">X</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">Y</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">Z</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
</pre></div>
</div>
<p>Thanks to <code class="docutils literal"><span class="pre">using</span> <span class="pre">namespace</span> <span class="pre">pdal::Dimension</span></code> we can just write <code class="docutils literal"><span class="pre">Id::X</span></code> etc.</p>
</div>
<div class="section" id="returns">
<h2>Returns<a class="headerlink" href="#returns" title="Permalink to this headline">¶</a></h2>
<p>libLAS:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">return_no</span> <span class="o">=</span> <span class="n">LASPoint_GetReturnNumber</span><span class="p">(</span><span class="n">LAS_point</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">n_returns</span> <span class="o">=</span> <span class="n">LASPoint_GetNumberOfReturns</span><span class="p">(</span><span class="n">LAS_point</span><span class="p">);</span>
</pre></div>
</div>
<p>PDAL:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">return_no</span> <span class="o">=</span> <span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">ReturnNumber</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">n_returns</span> <span class="o">=</span> <span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">NumberOfReturns</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<p>libLAS:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">point_class</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">LASPoint_GetClassification</span><span class="p">(</span><span class="n">LAS_point</span><span class="p">);</span>
</pre></div>
</div>
<p>PDAL:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">point_class</span> <span class="o">=</span> <span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">Classification</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="color">
<h2>Color<a class="headerlink" href="#color" title="Permalink to this headline">¶</a></h2>
<p>libLAS:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">LASColorH</span> <span class="n">LAS_color</span> <span class="o">=</span> <span class="n">LASPoint_GetColor</span><span class="p">(</span><span class="n">LAS_point</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">red</span> <span class="o">=</span> <span class="n">LASColor_GetRed</span><span class="p">(</span><span class="n">LAS_color</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">green</span> <span class="o">=</span> <span class="n">LASColor_GetGreen</span><span class="p">(</span><span class="n">LAS_color</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">blue</span> <span class="o">=</span> <span class="n">LASColor_GetBlue</span><span class="p">(</span><span class="n">LAS_color</span><span class="p">);</span>
</pre></div>
</div>
<p>PDAL:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">red</span> <span class="o">=</span> <span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">Red</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">green</span> <span class="o">=</span> <span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">Green</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">blue</span> <span class="o">=</span> <span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">Blue</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
</pre></div>
</div>
<p>For LAS format, <code class="docutils literal"><span class="pre">hasColor()</span></code> method of <code class="docutils literal"><span class="pre">LasHeader</span></code> to see if the
format supports RGB. However, in general, you can test use
<code class="docutils literal"><span class="pre">hasDim(Id::Red)</span></code>, <code class="docutils literal"><span class="pre">hasDim(Id::Green)</span></code> and <code class="docutils literal"><span class="pre">hasDim(Id::Blue)</span></code>
method calls on the point, to see if the color was defined.</p>
</div>
<div class="section" id="time">
<h2>Time<a class="headerlink" href="#time" title="Permalink to this headline">¶</a></h2>
<p>libLAS:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="n">time</span> <span class="o">=</span> <span class="n">LASPoint_GetTime</span><span class="p">(</span><span class="n">LAS_point</span><span class="p">);</span>
</pre></div>
</div>
<p>PDAL:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="n">time</span> <span class="o">=</span> <span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">GpsTime</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="other-point-attributes">
<h2>Other point attributes<a class="headerlink" href="#other-point-attributes" title="Permalink to this headline">¶</a></h2>
<p>libLAS:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">LASPoint_GetIntensity</span><span class="p">(</span><span class="n">LAS_point</span><span class="p">)</span>
<span class="n">LASPoint_GetScanDirection</span><span class="p">(</span><span class="n">LAS_point</span><span class="p">)</span>
<span class="n">LASPoint_GetFlightLineEdge</span><span class="p">(</span><span class="n">LAS_point</span><span class="p">)</span>
<span class="n">LASPoint_GetScanAngleRank</span><span class="p">(</span><span class="n">LAS_point</span><span class="p">)</span>
<span class="n">LASPoint_GetPointSourceId</span><span class="p">(</span><span class="n">LAS_point</span><span class="p">)</span>
<span class="n">LASPoint_GetUserData</span><span class="p">(</span><span class="n">LAS_point</span><span class="p">)</span>
</pre></div>
</div>
<p>PDAL:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">Intensity</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
<span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">ScanDirectionFlag</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
<span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">EdgeOfFlightLine</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
<span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">ScanAngleRank</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
<span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">PointSourceId</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
<span class="n">point_view</span><span class="o">-&gt;</span><span class="n">getFieldAs</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Id</span><span class="o">::</span><span class="n">UserData</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="memory-management">
<h2>Memory management<a class="headerlink" href="#memory-management" title="Permalink to this headline">¶</a></h2>
<p>In libLAS C API, we need to explicitly take care of freeing the memory:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">LASSRS_Destroy</span><span class="p">(</span><span class="n">LAS_srs</span><span class="p">);</span>
<span class="n">LASHeader_Destroy</span><span class="p">(</span><span class="n">LAS_header</span><span class="p">);</span>
<span class="n">LASReader_Destroy</span><span class="p">(</span><span class="n">LAS_reader</span><span class="p">);</span>
</pre></div>
</div>
<p>When using C++ and PDAL, the objects created on stack free the memory
when they go out of scope. When using smart pointers, they will take
care of the memory they manage. This does not apply to special cases
such as <code class="docutils literal"><span class="pre">exit()</span></code> function calls.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../faq.html" class="btn btn-neutral float-right" title="FAQ" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../cpp/writer.html" class="btn btn-neutral" title="pdal::Writer" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
                    &copy;  2019
                        <a href="https://github.com/abellgithub">Andrew Bell</a>,
                        <a href="https://github.com/chambbj">Brad Chambers</a>,
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>.
      Last updated on May 07, 2019.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.9.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
    <div class="footer">
        <div class="container">
                    &copy;  2019
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>,
                Last updated
                    on May 07, 2019.
        </div>
    </div>

</body>
</html>