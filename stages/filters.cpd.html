


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>filters.cpd &mdash; pdal.io</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/breathe.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="../about.html"/>
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="pdal.io" href="../index.html"/>
        <link rel="up" title="Filters" href="filters.html"/>
        <link rel="next" title="filters.icp" href="filters.icp.html"/>
        <link rel="prev" title="filters.sort" href="filters.sort.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> PDAL
          

          
          </a>

          
            
            
              <div class="version">
                1.7.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apps/index.html">Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pipeline.html">Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="readers.html">Readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="writers.html">Writers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="filters.html">Filters</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="filters.html#create">Create</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#order">Order</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="filters.html#move">Move</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">filters.cpd</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#options">Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="filters.icp.html">filters.icp</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.reprojection.html">filters.reprojection</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.transformation.html">filters.transformation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#cull">Cull</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#new">New</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#join">Join</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#metadata">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#mesh">Mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#languages">Languages</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#other">Other</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dimensions.html">Dimensions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workshop/index.html">Workshop</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/index.html">Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">PDAL</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Home</a> &raquo;</li>
      
        <li><a href="filters.html">Filters</a> &raquo;</li>
      
    <li>filters.cpd</li>
    <li class="wy-breadcrumbs-aside">
      
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="filters-cpd">
<span id="id1"></span><h1>filters.cpd<a class="headerlink" href="#filters-cpd" title="Permalink to this headline">¶</a></h1>
<p>The CPD filter uses the Coherent Point Drift <a class="reference internal" href="#myronenko" id="id2">[MS10]</a> algorithm to
compute a rigid, nonrigid, or affine transformation between datasets.  The
rigid and affine are what you’d expect; the nonrigid transformation uses Motion
Coherence Theory <a class="reference internal" href="#yuille1998" id="id3">[YG88]</a> to “bend” the points to find a best
alignment.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">CPD is computationally intensive and can be slow when working with many
points (i.e. <span class="math">\(&gt; 10,000\)</span>).  Nonrigid is significatly slower than rigid and
affine.</p>
</div>
<p>The first input to the change filter are considered the “fixed” points, and all
subsequent inputs are “moving” points.  The output from the change filter are
the “moving” points after the calculated transformation has been applied, one
point view per input.  Any additional information about the cpd registration,
e.g. the rigid transformation matrix, will be placed in the stage’s metadata.</p>
<div class="admonition plugin" id="plugin-0">
<p class="first admonition-title">Dynamic Plugin</p>
<p class="last">This stage requires a dynamic plugin to operate</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;pipeline&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;fixed.las&quot;</span><span class="p">,</span>
        <span class="s2">&quot;moving.las&quot;</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;filters.cpd&quot;</span><span class="p">,</span>
            <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;rigid&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;output.las&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If “method” is not provided, the cpd filter will default to using the rigid registration method.
To get the transform matrix, you’ll need to use the <code class="docutils literal"><span class="pre">--metadata</span></code> option:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pdal pipeline cpd-pipeline.json --metadata cpd-metadata.json
</pre></div>
</div>
<p>The metadata output might start something like:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;stages&quot;</span><span class="p">:</span>
    <span class="p">{</span>
        <span class="nt">&quot;filters.cpd&quot;</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="nt">&quot;iterations&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;rigid&quot;</span><span class="p">,</span>
            <span class="nt">&quot;runtime&quot;</span><span class="p">:</span> <span class="mf">0.003839</span><span class="p">,</span>
            <span class="nt">&quot;sigma2&quot;</span><span class="p">:</span> <span class="mf">5.684342128e-16</span><span class="p">,</span>
            <span class="nt">&quot;transform&quot;</span><span class="p">:</span> <span class="s2">&quot;           1 -6.21722e-17  1.30104e-18  5.29303e-11-8.99346e-17            1  2.60209e-18 -3.49247e-10 -2.1684e-19  1.73472e-18            1 -1.53477e-12           0            0            0            1&quot;</span>
        <span class="p">},</span>
    <span class="p">},</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="filters.transformation.html#filters-transformation"><span class="std std-ref">filters.transformation</span></a> to apply a transform to other points.</p>
</div>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>method</dt>
<dd>Change detection method to use.
Valid values are “rigid”, “affine”, and “nonrigid”.
[Default: <strong>rigid</strong>]</dd>
</dl>
<p id="bibtex-bibliography-stages/filters.cpd-0"><table class="docutils citation" frame="void" id="myronenko" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[MS10]</a></td><td>Andriy Myronenko and Xubo Song. Point set registration: coherent point drift. <em>IEEE transactions on pattern analysis and machine intelligence</em>, 32(12):2262–75, dec 2010.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="yuille1998" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[YG88]</a></td><td>Alan&nbsp;L. Yuille and Norberto&nbsp;M. Grzywacz. The Motion Coherence Theory. <em>Second International Conference on Computer Vision</em>, 1988.</td></tr>
</tbody>
</table>
</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="filters.icp.html" class="btn btn-neutral float-right" title="filters.icp" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="filters.sort.html" class="btn btn-neutral" title="filters.sort" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
                    &copy;  2018
                        <a href="https://github.com/abellgithub">Andrew Bell</a>,
                        <a href="https://github.com/chambbj">Brad Chambers</a>,
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>.
      Last updated on May 17, 2018.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.7.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
    <div class="footer">
        <div class="container">
                    &copy;  2018
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>,
                Last updated
                    on May 17, 2018.
        </div>
    </div>

</body>
</html>