


<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>filters.teaser &mdash; pdal.io</title>
  

  
  <link rel="stylesheet" href="../_static/css/pdal.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/pdal.css" type="text/css" />
  <link rel="stylesheet" href="../_static/breathe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/./_static/logo/favicon.ico"/>
  

  
  
    <link rel="canonical" href="https://pdal.io/stages/filters.teaser.html"/>
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> PDAL
          

          
          </a>

          
            
            
              <div class="version">
                2.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apps/index.html">Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pipeline.html">Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="stages.html">Stages</a></li>
<li class="toctree-l1"><a class="reference internal" href="readers.html">Readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="writers.html">Writers</a></li>
<li class="toctree-l1"><a class="reference internal" href="filters.html">Filters</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dimensions.html">Dimensions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../types.html">Types</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../java.html">Java</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workshop/index.html">Workshop</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/index.html">Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PDAL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html"> Documentation </a> &raquo;</li>
      
      <li>filters.teaser</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/PDAL/PDAL/edit//master/doc/stages/filters.teaser.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="filters-teaser">
<span id="id1"></span><h1>filters.teaser<a class="headerlink" href="#filters-teaser" title="Permalink to this headline">¶</a></h1>
<p>The <strong>TEASER filter</strong> uses the Truncated least squares Estimation And
SEmidefinite Relaxation (TEASER) algorithm <a class="reference internal" href="../references.html#yang2020" id="id2"><span>[Yang2020]</span></a> to calculate a <strong>rigid</strong>
transformation that best aligns two datasets. The first input to the ICP filter
is considered the “fixed” points, and all subsequent points are “moving”
points. The output from the filter are the “moving” points after the calculated
transformation has been applied, one point view per input. The transformation
matrix is inserted into the stage’s metadata.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The plugin wraps the TEASER++ library, which can be found at
<a class="reference external" href="https://github.com/MIT-SPARK/TEASER-plusplus">https://github.com/MIT-SPARK/TEASER-plusplus</a>.</p>
</div>
<div class="admonition plugin" id="plugin-0">
<p class="admonition-title">Dynamic Plugin</p>
<p>This stage requires a dynamic plugin to operate</p>
</div>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="s2">&quot;fixed.las&quot;</span><span class="p">,</span>
    <span class="s2">&quot;moving.las&quot;</span><span class="p">,</span>
    <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;filters.teaser&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;output.las&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
<p>To get the <code class="docutils literal notranslate"><span class="pre">transform</span></code> matrix, you’ll need to use the <code class="docutils literal notranslate"><span class="pre">--metadata</span></code> option
from the pipeline command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pdal pipeline teaser-pipeline.json --metadata teaser-metadata.json
</pre></div>
</div>
<p>The metadata output might start something like:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;stages&quot;</span><span class="p">:</span>
    <span class="p">{</span>
        <span class="nt">&quot;filters.teaser&quot;</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="nt">&quot;centroid&quot;</span><span class="p">:</span> <span class="s2">&quot;    583394  5.2831e+06   498.152&quot;</span><span class="p">,</span>
            <span class="nt">&quot;composed&quot;</span><span class="p">:</span> <span class="s2">&quot;           1  2.60209e-18 -1.97906e-09       -0.374999  8.9407e-08            1  5.58794e-09      -0.614662 6.98492e -10 -5.58794e-09            1   0.033234           0            0            0            1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;converged&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;fitness&quot;</span><span class="p">:</span> <span class="mf">0.01953125097</span><span class="p">,</span>
            <span class="nt">&quot;transform&quot;</span><span class="p">:</span> <span class="s2">&quot;           1  2.60209e-18 -1.97906e-09       -0.375  8.9407e-08            1  5.58794e-09      -0.5625 6.98492e -10 -5.58794e-09            1   0.00411987           0            0            0            1&quot;</span>
        <span class="p">}</span>
</pre></div>
</div>
<p>To apply this transformation to other points, the <code class="docutils literal notranslate"><span class="pre">centroid</span></code> and
<code class="docutils literal notranslate"><span class="pre">transform</span></code> metadata items can by used with <code class="docutils literal notranslate"><span class="pre">filters.transformation</span></code> in
another pipeline. First, move the centroid of the points to (0,0,0), then apply
the transform, then move the points back to the original location.  For the
above metadata, the pipeline would be similar to:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;readers.las&quot;</span><span class="p">,</span>
        <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;in.las&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;filters.transformation&quot;</span><span class="p">,</span>
        <span class="nt">&quot;matrix&quot;</span><span class="p">:</span> <span class="s2">&quot;1 0 0 -583394   0 1 0 -5.2831e+06   0 0 1 -498.152   0 0 0 1&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;filters.transformation&quot;</span><span class="p">,</span>
        <span class="nt">&quot;matrix&quot;</span><span class="p">:</span> <span class="s2">&quot;1  2.60209e-18 -1.97906e-09       -0.375  8.9407e-08            1  5.58794e-09      -0.5625 6.98492e -10 -5.58794e-09            1   0.00411987           0            0            0            1&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;filters.transformation&quot;</span><span class="p">,</span>
        <span class="nt">&quot;matrix&quot;</span><span class="p">:</span> <span class="s2">&quot;1 0 0 583394   0 1 0 5.2831e+06  0 0 1 498.152  0 0 0 1&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;writers.las&quot;</span><span class="p">,</span>
        <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;out.las&quot;</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">composed</span></code> metadata matrix is a composition of the three transformation steps outlined above, and can be used in a single call to <code class="docutils literal notranslate"><span class="pre">filters.transformation</span></code> as opposed to the three separate calls.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="filters.transformation.html#filters-transformation"><span class="std std-ref">filters.transformation</span></a> to apply a transform to other points.</p>
</div>
</section>
<section id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>nr</dt><dd><p>Radius to use for normal estimation. [Default: <strong>0.02</strong>]</p>
</dd>
<dt>fr</dt><dd><p>Radius to use when computing features. [Default: <strong>0.04</strong>]</p>
</dd>
<dt>fpfh</dt><dd><p>Use FPFH to find correspondences? [Default: <strong>true</strong>]</p>
</dd>
</dl>
<dl class="simple">
<dt>where</dt><dd><p>An <a class="reference internal" href="expression.html#pdal-expression"><span class="std std-ref">expression</span></a> that limits points passed to a filter.
Points that don’t pass the
expression skip the stage but are available to subsequent stages in a pipeline.
[Default: no filtering]</p>
</dd>
<dt>where_merge</dt><dd><p>A strategy for merging points skipped by a ‘<cite>where’</cite> option when running in standard mode.
If <code class="docutils literal notranslate"><span class="pre">true</span></code>, the skipped points are added to the first point view returned by the skipped
filter. If <code class="docutils literal notranslate"><span class="pre">false</span></code>, skipped points are placed in their own point view. If <code class="docutils literal notranslate"><span class="pre">auto</span></code>,
skipped points are merged into the returned point view provided that only one point view
is returned and it has the same point count as it did when the filter was run.
[Default: <code class="docutils literal notranslate"><span class="pre">auto</span></code>]</p>
</dd>
</dl>
</section>
</section>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://hobu.co">
        <div class="hobu-logo"></div>
      </a>
      <div class="copyright">
      

                    &copy;  2021
                        <a href="https://github.com/abellgithub">Andrew Bell</a>,
                        <a href="https://github.com/chambbj">Brad Chambers</a>,
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>.

      
      Last updated on Jul 19, 2021.
      </div>
    </div>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
    <div class="footer">
        <div class="container">
                    &copy;  2021
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>,
                Last updated
                    on Jul 19, 2021.
        </div>
    </div>

</body>
</html>