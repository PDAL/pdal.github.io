


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>filters.pclblock &mdash; pdal.io</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/breathe.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="../about.html"/>
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="pdal.io" href="../index.html"/>
        <link rel="up" title="Filters" href="filters.html"/>
        <link rel="next" title="filters.python" href="filters.python.html"/>
        <link rel="prev" title="filters.matlab" href="filters.matlab.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> PDAL
          

          
          </a>

          
            
            
              <div class="version">
                1.7.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apps/index.html">Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pipeline.html">Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="readers.html">Readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="writers.html">Writers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="filters.html">Filters</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="filters.html#create">Create</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#order">Order</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#move">Move</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#cull">Cull</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#new">New</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#join">Join</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#metadata">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#mesh">Mesh</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="filters.html#languages">Languages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="filters.matlab.html">filters.matlab</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">filters.pclblock</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#options">Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pcl-block-schema">PCL Block Schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implemented-filters">Implemented Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-a-new-filter">Adding a New Filter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="filters.python.html">filters.python</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#other">Other</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dimensions.html">Dimensions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workshop/index.html">Workshop</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/index.html">Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">PDAL</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Home</a> &raquo;</li>
      
        <li><a href="filters.html">Filters</a> &raquo;</li>
      
    <li>filters.pclblock</li>
    <li class="wy-breadcrumbs-aside">
      
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="filters-pclblock">
<span id="id1"></span><h1>filters.pclblock<a class="headerlink" href="#filters-pclblock" title="Permalink to this headline">¶</a></h1>
<p>The PCL Block filter allows users to specify a block of Point Cloud Library
(<a class="reference external" href="http://www.pointclouds.org">PCL</a>) operations on a PDAL <code class="docutils literal"><span class="pre">PointView</span></code>, applying the necessary conversions
between PDAL and PCL point cloud representations.</p>
<p>This filter is under active development. The current implementation serves as a
proof of concept for linking PCL into PDAL and converting data. The PCL Block
filter creates a PCL <code class="docutils literal"><span class="pre">Pipeline</span></code> object and passes it a single argument, the
JSON file containing the PCL block definition. After filtering, the resulting
indices can be retrieved and used to create a new PDAL <code class="docutils literal"><span class="pre">PointView</span></code> containing
only those points that passed the filtering stages.</p>
<p>At this stage in its development, the PCL <code class="docutils literal"><span class="pre">Pipeline</span></code> does not allow complex
operations that may change the point type (e.g., <code class="docutils literal"><span class="pre">PointXYZ</span></code> to
<code class="docutils literal"><span class="pre">PointNormal</span></code>) or alter points.  We will continue to look into use cases that
are of value and feasible, but for now are limited primarily to PCL functions
that filter or segment the point cloud, returning a list of indices of the
filtered points (e.g., ground or object, noise or signal). The main reason for
this design decision is that we want to avoid converting all <code class="docutils literal"><span class="pre">PointView</span></code>
dimensions to the PCL <code class="docutils literal"><span class="pre">PointCloud</span></code>. In the case of an LAS reader, we may very
well not want to operate on fields such as return number, but we do not want to
lose this information post PCL filtering. The easy solution is to simply retain
the index between the <code class="docutils literal"><span class="pre">PointView</span></code> and <code class="docutils literal"><span class="pre">PointCloud</span></code> objects and update as
necessary.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p>See <a class="reference internal" href="../tutorial/pcl_block_tutorial.html#pcl-block-tutorial"><span class="std std-ref">Filtering data with PCL</span></a> for more on using the PCL Block including
examples.</p>
<p class="last">See <a class="reference internal" href="../tutorial/pcl_spec.html#pcl-json-specification"><span class="std std-ref">1&nbsp;&nbsp;&nbsp;Draft PCL JSON Specification</span></a> for complete details on the PCL Block JSON syntax
and the filters available.</p>
</div>
<div class="admonition plugin" id="plugin-0">
<p class="first admonition-title">Dynamic Plugin</p>
<p class="last">This stage requires a dynamic plugin to operate</p>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>filename</dt>
<dd>Path to external PCL JSON file describing the pipeline</dd>
<dt>methods</dt>
<dd>Raw PCL JSON array describing the pipeline</dd>
</dl>
</div>
<div class="section" id="pcl-block-schema">
<h2>PCL Block Schema<a class="headerlink" href="#pcl-block-schema" title="Permalink to this headline">¶</a></h2>
<p>The PCL Block json object describes the filter chain to be constructed within
PCL. Here is an example:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;FilterOne&quot;</span><span class="p">,</span>
        <span class="nt">&quot;setFooParameter&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;FilterTwo&quot;</span><span class="p">,</span>
        <span class="nt">&quot;setBarParameter&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;setBounds&quot;</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="nt">&quot;upper&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
            <span class="nt">&quot;lower&quot;</span><span class="p">:</span> <span class="mi">17</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="implemented-filters">
<h2>Implemented Filters<a class="headerlink" href="#implemented-filters" title="Permalink to this headline">¶</a></h2>
<p>The list of PCL filters that are accessible through the PCL Block depends on PCL
itself. PDAL is rather dumb in this respect, merely converting the PDAL
<code class="docutils literal"><span class="pre">PointView</span></code> to a PCL <code class="docutils literal"><span class="pre">PointCloud</span></code> object and passing the JSON filename. The
parsing of the JSON file and implementation of the PCL filters is entirely
embedded within the PCL <code class="docutils literal"><span class="pre">Pipeline</span></code>.</p>
<p>A summary of the currently available filters is listed below. For full details
of the filters and their parameters, see the <a class="reference internal" href="../tutorial/pcl_spec.html#pcl-json-specification"><span class="std std-ref">1&nbsp;&nbsp;&nbsp;Draft PCL JSON Specification</span></a>.</p>
<dl class="docutils">
<dt>ApproximateProgressiveMorphologicalFilter</dt>
<dd>faster (and potentially less accurate) version of the
<strong>ProgressiveMorphologicalFilter</strong></dd>
<dt>GridMinimum</dt>
<dd>assembles a local 2D grid over a given PointCloud, then downsamples the data</dd>
<dt>PassThrough</dt>
<dd>allows the user to set min/max bounds on one dimension of the data</dd>
<dt>ProgressiveMorphologicalFilter</dt>
<dd>removes nonground points to produce a bare-earth point cloud</dd>
<dt>RadiusOutlierRemoval</dt>
<dd>removes outliers if the number of neighbors in a certain search radius is
smaller than a given K</dd>
<dt>StatisticalOutlierRemoval</dt>
<dd>uses point neighborhood statistics to filter outlier data</dd>
<dt>VoxelGrid</dt>
<dd>assembles a local 3D grid over a given PointCloud, then downsamples and
filters the data</dd>
</dl>
</div>
<div class="section" id="adding-a-new-filter">
<h2>Adding a New Filter<a class="headerlink" href="#adding-a-new-filter" title="Permalink to this headline">¶</a></h2>
<p>Adding a new PCL filter to the PCLBlock ecosystem is mostly a process of
judicious copying and pasting.</p>
<ol class="arabic simple">
<li>Add the filter function declaration of the form <code class="docutils literal"><span class="pre">applyMyFilter</span></code> to
<code class="docutils literal"><span class="pre">PCLPipeline.h</span></code>.</li>
<li>Add the implementation of <code class="docutils literal"><span class="pre">applyMyFilter</span></code> to <code class="docutils literal"><span class="pre">PCLPipeline.hpp</span></code>.</li>
<li>Add a one-line description of the shiny new filter to this file,
<code class="docutils literal"><span class="pre">filters.pclblock.rst</span></code>.</li>
<li>Add a full description of the new filter to <a class="reference internal" href="../tutorial/pcl_spec.html#pcl-json-specification"><span class="std std-ref">pcl_spec.rst</span></a>, including example JSON, all parameters, and
default settings.</li>
<li>Add a test to <code class="docutils literal"><span class="pre">PCLBlockFilterTest.cpp</span></code>. Make sure each parameter is
independently verified.</li>
</ol>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="filters.python.html" class="btn btn-neutral float-right" title="filters.python" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="filters.matlab.html" class="btn btn-neutral" title="filters.matlab" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
                    &copy;  2018
                        <a href="https://github.com/abellgithub">Andrew Bell</a>,
                        <a href="https://github.com/chambbj">Brad Chambers</a>,
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>.
      Last updated on May 19, 2018.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.7.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
    <div class="footer">
        <div class="container">
                    &copy;  2018
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>,
                Last updated
                    on May 19, 2018.
        </div>
    </div>

</body>
</html>