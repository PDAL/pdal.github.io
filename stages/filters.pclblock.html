
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>filters.pclblock &mdash; pdal.io</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/breathe.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.4/cerulean/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="pdal.io" href="../index.html" />
    <link rel="up" title="Readers, Writers, and Filters" href="index.html" />
    <link rel="next" title="filters.poisson" href="filters.poisson.html" />
    <link rel="prev" title="filters.movingleastsquares" href="filters.movingleastsquares.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          PDAL</a>
        <span class="navbar-text navbar-version pull-left"><b>1.2.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../download.html">Download</a></li>
                <li><a href="https://github.com/PDAL/PDAL">GitHub</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Docs <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../download.html#current-release-s">Current Release(s)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html#past-releases">Past Releases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download.html#binaries">Binaries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../compilation/index.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../compilation/unix.html">Unix Compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compilation/windows.html">Building Under Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compilation/dependencies.html">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compilation/python.html">Python installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../apps.html">Applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../apps.html#delta-command">delta command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apps.html#density-command">density command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apps.html#diff-command">diff command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apps.html#ground-command">ground command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apps.html#info-command">info command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apps.html#merge-command">merge command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apps.html#pcl-command">pcl command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apps.html#pipeline-command">pipeline command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apps.html#random-command">random command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apps.html#split-command">split command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apps.html#tindex-command">tindex command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apps.html#translate-command">translate command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apps.html#view-command">view command</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../community.html#mailing-list">Mailing List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community.html#github">GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community.html#irc">IRC</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Readers, Writers, and Filters</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#readers">Readers</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#writers">Writers</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#filters">Filters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/index.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/index.html#using-pdal">Using PDAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/index.html#developing">Developing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/docker.html">Docker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/docker.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/docker.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/docker.html#what-you-get">What you get</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pipeline.html">Pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pipeline.html#composing-pipelines">Composing pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline.html#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline.html#options">Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline.html#syntax-specification">Syntax Specification</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/index.html#build-and-test-status">Build and Test Status</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/cpp/index.html">C++ API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../metadata.html">Metadata</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../metadata.html#metadata-types">Metadata Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata.html#json-representation">JSON representation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata.html#pipeline-xml-representation"><code class="docutils literal"><span class="pre">Pipeline</span></code> XML representation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributors.html">Contributors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributors.html#engineering-contributors">Engineering Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributors.html#funding-contributors">Funding Contributors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">License</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../copyright.html#overall-pdal-license-bsd">Overall PDAL license (BSD)</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Here <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">filters.pclblock</a><ul>
<li><a class="reference internal" href="#options">Options</a></li>
<li><a class="reference internal" href="#pcl-block-schema">PCL Block Schema</a></li>
<li><a class="reference internal" href="#implemented-filters">Implemented Filters</a></li>
<li><a class="reference internal" href="#adding-a-new-filter">Adding a New Filter</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="filters.movingleastsquares.html" title="Previous Chapter: filters.movingleastsquares"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; filters.movin...</span>
    </a>
  </li>
  <li>
    <a href="filters.poisson.html" title="Next Chapter: filters.poisson"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">filters.poisson &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="filters-pclblock">
<span id="id1"></span><h1>filters.pclblock<a class="headerlink" href="#filters-pclblock" title="Permalink to this headline">¶</a></h1>
<p>The PCL Block filter allows users to specify a block of Point Cloud Library
(<a class="reference external" href="http://www.pointclouds.org">PCL</a>) operations on a PDAL <code class="docutils literal"><span class="pre">PointView</span></code>, applying the necessary conversions
between PDAL and PCL point cloud representations.</p>
<p>This filter is under active development. The current implementation serves as a
proof of concept for linking PCL into PDAL and converting data. The PCL Block
filter creates a PCL <code class="docutils literal"><span class="pre">Pipeline</span></code> object and passes it a single argument, the JSON
file containing the PCL block definition. After filtering, the resulting indices
can be retrieved and used to create a new PDAL <code class="docutils literal"><span class="pre">PointView</span></code> containing only
those points that passed the filtering stages.</p>
<p>At this stage in its development, the PCL <code class="docutils literal"><span class="pre">Pipeline</span></code> does not allow complex
operations that may change the point type (e.g., <code class="docutils literal"><span class="pre">PointXYZ</span></code> to <code class="docutils literal"><span class="pre">PointNormal</span></code>) or
alter points.  We will continue to look into use cases that are of value and
feasible, but for now are limited primarily to PCL functions that filter or
segment the point cloud, returning a list of indices of the filtered points
(e.g., ground or object, noise or signal). The main reason for this design
decision is that we want to avoid converting all <code class="docutils literal"><span class="pre">PointView</span></code> dimensions to the
PCL <code class="docutils literal"><span class="pre">PointCloud</span></code>. In the case of an LAS reader, we may very well not want to
operate on fields such as return number, but we do not want to lose this
information post PCL filtering. The easy solution is to simply retain the index
between the <code class="docutils literal"><span class="pre">PointView</span></code> and <code class="docutils literal"><span class="pre">PointCloud</span></code> objects and update as necessary.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p>See <a class="reference internal" href="../tutorial/pcl_block_tutorial.html#pcl-block-tutorial"><span>Filtering data with PCL</span></a> for more on using the PCL Block including
examples.</p>
<p class="last">See <a class="reference internal" href="../tutorial/pcl_spec.html#pcl-json-specification"><span>1&nbsp;&nbsp;&nbsp;Draft PCL JSON Specification</span></a> for complete details on the PCL Block JSON syntax
and the filters available.</p>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>filename</dt>
<dd>JSON file to read [Required]</dd>
</dl>
</div>
<div class="section" id="pcl-block-schema">
<h2>PCL Block Schema<a class="headerlink" href="#pcl-block-schema" title="Permalink to this headline">¶</a></h2>
<p>The PCL Block json object describes the filter chain to be constructed within
PCL. Here is an example:</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
    <span class="nt">&quot;pipeline&quot;</span><span class="p">:</span>
    <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;PCL-Block-Name&quot;</span><span class="p">,</span>
        <span class="nt">&quot;help&quot;</span><span class="p">:</span> <span class="s2">&quot;This is an example pipeline with two filters.&quot;</span><span class="p">,</span>
        <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;mpg&quot;</span><span class="p">,</span>
        <span class="nt">&quot;filters&quot;</span><span class="p">:</span>
        <span class="p">[</span>
            <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;FilterOne&quot;</span><span class="p">,</span>
                <span class="nt">&quot;setFooParameter&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;FilterTwo&quot;</span><span class="p">,</span>
                <span class="nt">&quot;setBarParameter&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nt">&quot;setBounds&quot;</span><span class="p">:</span>
                <span class="p">{</span>
                    <span class="nt">&quot;upper&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
                    <span class="nt">&quot;lower&quot;</span><span class="p">:</span> <span class="mi">17</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="implemented-filters">
<h2>Implemented Filters<a class="headerlink" href="#implemented-filters" title="Permalink to this headline">¶</a></h2>
<p>The list of PCL filters that are accessible through the PCL Block depends on PCL
itself. PDAL is rather dumb in this respect, merely converting the PDAL
<code class="docutils literal"><span class="pre">PointView</span></code> to a PCL <code class="docutils literal"><span class="pre">PointCloud</span></code> object and passing the JSON filename. The
parsing of the JSON file and implementation of the PCL filters is entirely
embedded within the PCL <code class="docutils literal"><span class="pre">Pipeline</span></code>.</p>
<p>A summary of the currently available filters is listed below. For full details
of the filters and their parameters, see the <a class="reference internal" href="../tutorial/pcl_spec.html#pcl-json-specification"><span>1&nbsp;&nbsp;&nbsp;Draft PCL JSON Specification</span></a>.</p>
<dl class="docutils">
<dt>ApproximateProgressiveMorphologicalFilter</dt>
<dd>faster (and potentially less accurate) version of the
<strong>ProgressiveMorphologicalFilter</strong></dd>
<dt>ConditionalRemoval</dt>
<dd>filters the data to remove normals outside of a given Z range</dd>
<dt>GridMinimum</dt>
<dd>assembles a local 2D grid over a given PointCloud, then downsamples the data</dd>
<dt>NormalEstimation</dt>
<dd>computes the surfaces normals of the points in the input</dd>
<dt>PassThrough</dt>
<dd>allows the user to set min/max bounds on one dimension of the data</dd>
<dt>ProgressiveMorphologicalFilter</dt>
<dd>removes nonground points to produce a bare-earth point cloud</dd>
<dt>RadiusOutlierRemoval</dt>
<dd>removes outliers if the number of neighbors in a certain search radius is
smaller than a given K</dd>
<dt>StatisticalOutlierRemoval</dt>
<dd>uses point neighborhood statistics to filter outlier data</dd>
<dt>VoxelGrid</dt>
<dd>assembles a local 3D grid over a given PointCloud, then downsamples and
filters the data</dd>
</dl>
</div>
<div class="section" id="adding-a-new-filter">
<h2>Adding a New Filter<a class="headerlink" href="#adding-a-new-filter" title="Permalink to this headline">¶</a></h2>
<p>Adding a new PCL filter to the PCLBlock ecosystem is mostly a process of
judicious copying and pasting.</p>
<ol class="arabic simple">
<li>Add the filter function declaration of the form <code class="docutils literal"><span class="pre">applyMyFilter</span></code> to
<code class="docutils literal"><span class="pre">PCLPipeline.h</span></code>.</li>
<li>Add the implementation of <code class="docutils literal"><span class="pre">applyMyFilter</span></code> to <code class="docutils literal"><span class="pre">PCLPipeline.hpp</span></code>.</li>
<li>Add a one-line description of the shiny new filter to this file,
<code class="docutils literal"><span class="pre">filters.pclblock.rst</span></code>.</li>
<li>Add a full description of the new filter to <a class="reference internal" href="../tutorial/pcl_spec.html#pcl-json-specification"><span>pcl_spec.rst</span></a>, including example JSON, all parameters, and
default settings.</li>
<li>Add a test to <code class="docutils literal"><span class="pre">PCLBlockFilterTest.cpp</span></code>. Make sure each parameter is
independently verified.</li>
</ol>
</div>
</div>


    </div>
      
  </div>
</div>
    <div class="footer">
        <div class="container">
                    &copy;  2016
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>,
                Last updated
                    on Apr 07, 2016.
        </div>
    </div>
  </body>
</html>