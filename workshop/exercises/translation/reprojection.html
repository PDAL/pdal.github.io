
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reprojection &mdash; pdal.io</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/pdal.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/breathe.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="canonical" href="https://pdal.io/workshop/exercises/translation/reprojection.html"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../copyright.html" />
    <link rel="next" title="Entwine" href="entwine.html" />
    <link rel="prev" title="Compression" href="compression.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> PDAL
          </a>
              <div class="version">
                2.3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../about.html">About</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../download.html">Download</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../apps/index.html">Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../community.html">Community</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../pipeline.html">Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../stages/stages.html">Stages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../stages/readers.html">Readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../stages/writers.html">Writers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../stages/filters.html">Filters</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../dimensions.html">Dimensions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../types.html">Types</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../python.html">Python</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../java.html">Java</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/index.html">Tutorials</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Workshop</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../agenda.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lidar-introduction.html">Introduction to LiDAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software.html">Software Installation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Exercises</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../index.html#basic-information">Basic Information</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#translation">Translation</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="compression.html">Compression</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Reprojection</a></li>
<li class="toctree-l4"><a class="reference internal" href="entwine.html">Entwine</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#analysis">Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#python">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#georeferencing">Georeferencing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#batch-processing">Batch Processing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../capstone.html">Final Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../notes.html">Notes</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../project/index.html">Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../copyright.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">PDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html"> Documentation </a> &raquo;</li>
      
          <li><a href="../../index.html">Point Cloud Processing and Analysis with PDAL</a> &raquo;</li>
      
          <li><a href="../index.html">Exercises</a> &raquo;</li>
      
      <li>Reprojection</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/PDAL/PDAL/edit//master/doc/workshop/exercises/translation/reprojection.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="entwine.html" class="btn btn-neutral float-right" title="Entwine" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="compression.html" class="btn btn-neutral float-left" title="Compression" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="reprojection">
<span id="id1"></span><h1>Reprojection<a class="headerlink" href="#reprojection" title="Permalink to this headline"></a></h1>
<span class="target" id="index-0"></span><section id="exercise">
<h2>Exercise<a class="headerlink" href="#exercise" title="Permalink to this headline"></a></h2>
<p>This exercise uses PDAL to reproject <a class="reference external" href="http://www.asprs.org/Committee-General/LASer-LAS-File-Format-Exchange-Activities.html">ASPRS LAS</a> data</p>
<p>Issue the following command in your <cite>Conda Shell</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">pdal</span> <span class="n">translate</span> <span class="o">./</span><span class="n">exercises</span><span class="o">/</span><span class="n">analysis</span><span class="o">/</span><span class="n">ground</span><span class="o">/</span><span class="n">CSite1_orig</span><span class="o">-</span><span class="n">utm</span><span class="o">.</span><span class="n">laz</span> \
<span class="linenos">2</span>  <span class="o">./</span><span class="n">exercises</span><span class="o">/</span><span class="n">translation</span><span class="o">/</span><span class="n">csite</span><span class="o">-</span><span class="n">dd</span><span class="o">.</span><span class="n">laz</span> <span class="n">reprojection</span> \
<span class="linenos">3</span>  <span class="o">--</span><span class="n">filters</span><span class="o">.</span><span class="n">reprojection</span><span class="o">.</span><span class="n">out_srs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">pdal</span> <span class="n">translate</span> <span class="o">./</span><span class="n">exercises</span><span class="o">/</span><span class="n">analysis</span><span class="o">/</span><span class="n">ground</span><span class="o">/</span><span class="n">CSite1_orig</span><span class="o">-</span><span class="n">utm</span><span class="o">.</span><span class="n">laz</span> <span class="o">^</span>
<span class="linenos">2</span>  <span class="o">./</span><span class="n">exercises</span><span class="o">/</span><span class="n">translation</span><span class="o">/</span><span class="n">csite</span><span class="o">-</span><span class="n">dd</span><span class="o">.</span><span class="n">laz</span> <span class="n">reprojection</span> <span class="o">^</span>
<span class="linenos">3</span>  <span class="o">--</span><span class="n">filters</span><span class="o">.</span><span class="n">reprojection</span><span class="o">.</span><span class="n">out_srs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span>
</pre></div>
</div>
<a class="reference external image-reference" href="../../../_images/reprojection-run-command.png"><img alt="../../../_images/reprojection-run-command.png" src="../../../_images/reprojection-run-command.png" /></a>
<p>Unfortunately this doesn’t produce the intended results for us. Issue the following
<code class="docutils literal notranslate"><span class="pre">pdal</span> <span class="pre">info</span></code> command to see why:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdal</span> <span class="n">info</span> <span class="o">./</span><span class="n">exercises</span><span class="o">/</span><span class="n">translation</span><span class="o">/</span><span class="n">csite</span><span class="o">-</span><span class="n">dd</span><span class="o">.</span><span class="n">laz</span> <span class="o">--</span><span class="nb">all</span> \
    <span class="o">|</span> <span class="n">jq</span> <span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">native</span><span class="o">.</span><span class="n">bbox</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdal</span> <span class="n">info</span> <span class="o">./</span><span class="n">exercises</span><span class="o">/</span><span class="n">translation</span><span class="o">/</span><span class="n">csite</span><span class="o">-</span><span class="n">dd</span><span class="o">.</span><span class="n">laz</span> <span class="o">--</span><span class="nb">all</span> <span class="o">^</span>
    <span class="o">|</span> <span class="n">jq</span> <span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">native</span><span class="o">.</span><span class="n">bbox</span>
</pre></div>
</div>
<a class="reference external image-reference" href="../../../_images/reprojection-wrong-scale.png"><img alt="../../../_images/reprojection-wrong-scale.png" src="../../../_images/reprojection-wrong-scale.png" /></a>
<p><code class="docutils literal notranslate"><span class="pre">--all</span></code> dumps all <a class="reference internal" href="../../../apps/info.html#info-command"><span class="std std-ref">info</span></a> information about the file, and we
can then use the <a class="reference external" href="https://stedolan.github.io/jq/">jq</a> command to extract out the “native” (same coordinate
system as the file itself) bounding box. As we can see, the problem is
we only have two decimal places of precision on the bounding box. For
geographic coordinate systems, this isn’t enough precision.</p>
<p>Printing the first point confirms this problem:</p>
<a class="reference external image-reference" href="../../../_images/reprojection-first-point.png"><img alt="../../../_images/reprojection-first-point.png" src="../../../_images/reprojection-first-point.png" /></a>
<p>Some formats, like <a class="reference internal" href="../../../stages/writers.las.html#writers-las"><span class="std std-ref">writers.las</span></a> do not automatically set scaling
information. PDAL cannot really do this for you because there are a number
of ways to trip up. For latitude/longitude data, you will need to set
the scale to smaller values like <code class="docutils literal notranslate"><span class="pre">0.0000001</span></code>. Additionally, LAS uses
an offset value to move the origin of the value. Use PDAL to set that
to <code class="docutils literal notranslate"><span class="pre">auto</span></code> so you don’t have to compute it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">pdal</span> <span class="n">translate</span> \
<span class="linenos">2</span><span class="o">./</span><span class="n">exercises</span><span class="o">/</span><span class="n">analysis</span><span class="o">/</span><span class="n">ground</span><span class="o">/</span><span class="n">CSite1_orig</span><span class="o">-</span><span class="n">utm</span><span class="o">.</span><span class="n">laz</span> \
<span class="linenos">3</span><span class="o">./</span><span class="n">exercises</span><span class="o">/</span><span class="n">translation</span><span class="o">/</span><span class="n">csite</span><span class="o">-</span><span class="n">dd</span><span class="o">.</span><span class="n">laz</span> <span class="n">reprojection</span> \
<span class="linenos">4</span><span class="o">--</span><span class="n">filters</span><span class="o">.</span><span class="n">reprojection</span><span class="o">.</span><span class="n">out_srs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span> \
<span class="linenos">5</span><span class="o">--</span><span class="n">writers</span><span class="o">.</span><span class="n">las</span><span class="o">.</span><span class="n">scale_x</span><span class="o">=</span><span class="mf">0.0000001</span> \
<span class="linenos">6</span><span class="o">--</span><span class="n">writers</span><span class="o">.</span><span class="n">las</span><span class="o">.</span><span class="n">scale_y</span><span class="o">=</span><span class="mf">0.0000001</span> \
<span class="linenos">7</span><span class="o">--</span><span class="n">writers</span><span class="o">.</span><span class="n">las</span><span class="o">.</span><span class="n">offset_x</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span> \
<span class="linenos">8</span><span class="o">--</span><span class="n">writers</span><span class="o">.</span><span class="n">las</span><span class="o">.</span><span class="n">offset_y</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">pdal</span> <span class="n">translate</span> <span class="o">^</span>
<span class="linenos">2</span><span class="o">./</span><span class="n">exercises</span><span class="o">/</span><span class="n">analysis</span><span class="o">/</span><span class="n">ground</span><span class="o">/</span><span class="n">CSite1_orig</span><span class="o">-</span><span class="n">utm</span><span class="o">.</span><span class="n">laz</span> <span class="o">^</span>
<span class="linenos">3</span><span class="o">./</span><span class="n">exercises</span><span class="o">/</span><span class="n">translation</span><span class="o">/</span><span class="n">csite</span><span class="o">-</span><span class="n">dd</span><span class="o">.</span><span class="n">laz</span> <span class="n">reprojection</span> <span class="o">^</span>
<span class="linenos">4</span><span class="o">--</span><span class="n">filters</span><span class="o">.</span><span class="n">reprojection</span><span class="o">.</span><span class="n">out_srs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span> <span class="o">^</span>
<span class="linenos">5</span><span class="o">--</span><span class="n">writers</span><span class="o">.</span><span class="n">las</span><span class="o">.</span><span class="n">scale_x</span><span class="o">=</span><span class="mf">0.0000001</span> <span class="o">^</span>
<span class="linenos">6</span><span class="o">--</span><span class="n">writers</span><span class="o">.</span><span class="n">las</span><span class="o">.</span><span class="n">scale_y</span><span class="o">=</span><span class="mf">0.0000001</span> <span class="o">^</span>
<span class="linenos">7</span><span class="o">--</span><span class="n">writers</span><span class="o">.</span><span class="n">las</span><span class="o">.</span><span class="n">offset_x</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span> <span class="o">^</span>
<span class="linenos">8</span><span class="o">--</span><span class="n">writers</span><span class="o">.</span><span class="n">las</span><span class="o">.</span><span class="n">offset_y</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span>
</pre></div>
</div>
<a class="reference external image-reference" href="../../../_images/reprojection-run-with-scale.png"><img alt="../../../_images/reprojection-run-with-scale.png" src="../../../_images/reprojection-run-with-scale.png" /></a>
<p>Run the <cite>pdal info</cite> command again to verify the <code class="docutils literal notranslate"><span class="pre">X</span></code>, <code class="docutils literal notranslate"><span class="pre">Y</span></code>, and <code class="docutils literal notranslate"><span class="pre">Z</span></code>
dimensions:</p>
<a class="reference external image-reference" href="../../../_images/reprojection-proper-scale.png"><img alt="../../../_images/reprojection-proper-scale.png" src="../../../_images/reprojection-proper-scale.png" /></a>
</section>
<section id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline"></a></h2>
<ol class="arabic simple">
<li><p><a class="reference internal" href="../../../stages/filters.reprojection.html#filters-reprojection"><span class="std std-ref">filters.reprojection</span></a> will use whatever coordinate system is defined
by the point cloud file, but you can override it using the <code class="docutils literal notranslate"><span class="pre">in_srs</span></code>
option. This is useful in situations where the coordinate system
is not correct, not completely specified, or your system doesn’t have
all of the required supporting coordinate system dictionaries.</p></li>
<li><p>PDAL uses <a class="reference external" href="http://proj4.org">Proj.4</a> library for reprojection. This library includes
the capability to do both vertical and horizontal datum transformations.</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="entwine.html" class="btn btn-neutral float-right" title="Entwine" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="compression.html" class="btn btn-neutral float-left" title="Compression" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://hobu.co">
        <div class="hobu-logo"></div>
      </a>
      <div class="copyright">
      

                    &copy;  2021
                        <a href="https://github.com/abellgithub">Andrew Bell</a>,
                        <a href="https://github.com/chambbj">Brad Chambers</a>,
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>.

      
      Last updated on Sep 16, 2021.
      </div>
    </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <div class="footer">
        <div class="container">
                    &copy;  2021
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>,
                Last updated
                    on Sep 16, 2021.
        </div>
    </div>

</body>
</html>